# 指针总结

## 1. 指针的定义

指针就是一个变量, 这个变量里面存的是一个地址. 

```c
int main(){
    int a = 10; // 在内存中开辟一块空间
    int* p = &a; // 将变量a的地址存放在变量P中, 这是, p就称为一个指针变量
    return 0;
}
```

指针是用来存放地址的,  地址是唯一标示一块地址空间的.  凡是存放在指针中的值全部被当成地址处理

指针在32位系统下, 指针占4个字节; 在64位系统下, 指针占8个字节

## 2. 指针和指针类型

``` c
int* pa = NULL;
char* pc = NULL;
double* pd = NULL;
```

由此可见,  不仅仅变量有不同的类型, 指针也是有不同的类型的.

int* 是用来存放整型元素的地址的.

char*是用来存放字符型元素的地址的. 

double* 是用来存放浮点型元素地址的.

### 指针类型的意义

#### 指针 + - 整数

```c
int main() {
    int a = 10;
    int* pa = &a;
    char* pc = (char*)&a;
    printf("%p\n", &a);
    printf("%p\n", pa);
    printf("%p\n", pa + 1);
    printf("%p\n", pc);
    printf("%p\n", pc + 1);
    return 0;
}
```

指针的类型决定了指针向前或向后走一步有多大

#### 指针的解引用

```c
int main() {
    int a = 0x11223344;
    int* pa = &a;
    char* pc = (char*)&a;
    *pa = 0; // 重点在调试过程中观察内存的变化
    *pc = 0; // 重点在调试过程中观察内存的变化
    return 0;
}
```

指针的类型决定了对指针解引用的时候有多大的权限(能操作几个字节).

int* 的指针解引用后能操作4个字节, char*的指针解引用后能操作1个字节

## 3. 指针运算

### (1). 指针 + - 整数

### (2). 指针 - 指针

指针 - 指针的前提是两个指针指向的是同一块内存空间. 指针 - 指针的绝对值是计算的指针与指针之间元素的个数

```c
int my_strlen(char* str) {
	char* start = str;
	char* end = str;
	while (*end != '\0') {
		end++;
	}
	return end - start;
}
```

### (3). 指针的关系运算

```c
for(vp = &values[N_VALUES]; vp > &values[0]){
    *--vp = 0;
}
```

C语言标准规定, 允许指向数组元素的指针与指向数组最后一个元素后面的那个内存位置的指针进行比较(可以向后比较),  但是不允许与指向第一个元素之前的那个内存位置的指针进行比较(不可以向前比较).

## 4. 指针和数组

通常情况下, 数组名表示的是数组首元素的地址. 这样就可以将数组名当成地址存放到一个指针中, 我们就可以通过指针来访问该数组了

## 5. 二级指针

指针变量也是变量, 也会有地址, 那么存放指针变量地址的变量就称为二级指针. 这时我们将普通的指针称为一级指针, 二级指针就是存放一级指针地址的一个指针变量

```c
int main() {
	int a = 10;
	printf("%d\n", a); // 10
	int* pa = &a;
	*pa = 20;
	int** ppa = &pa;
	**ppa; 
	printf("%d\n", a); // 20
	return 0;
}
```

*ppa通过对ppa解引用找到pa, 然后再对pa进行解引用(**pa)得到a.

## 6. 指针数组

指针数组本质上是一个数组, 只是数组中存放的元素类型全部为指针类型

```c
int* arr[10]; // 整型指针数组
char* arr1[5]; // 字符型指针数组
```





